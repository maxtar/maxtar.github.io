[{"uri":"https://maxtar.github.io/linux/","title":"Linux","tags":[],"description":"","content":"Linux Некоторые знания по Linux В этом разделе собрана разная полезная информация по linux.\n"},{"uri":"https://maxtar.github.io/linux/useful-information/","title":"Полезная информация по разным командам Linux","tags":[],"description":"","content":"Просмотр журнала journalctl -b -xe -u NetworkManager где:\nb - просмотр последней загрузки. Если указать индекс, начиная с нуля, то можно будет смотреть журнал предыдущих загрузок (0 - текущая, 1 - предыдущая и т.д.); x - вывод расширенной информации (по возможности); e - показ последних записей (перемотка в конец журнала); u - вывод информации от указанного модуля (в данном примере NetworkManager). Описание NetworkManager У него есть, также, интерфейс командной строки nmcli.\nНеобновляемые пакеты Если в результате выполнения команды sudo apt-get update в консоли появляется следующее сообщение:\nПакеты, которые будут оставлены в неизменном виде: \u0026lt;перечисление_пакетов\u0026gt; То необходимо выполнить следующую команду:\nsudo apt-get dist-upgrade Просмотр версии дистрибутива (только для LSB дистрибутивов) lsb_release -a Команда удаления всех старых версий ядра Взято отсюда\nsudo apt-get purge $(dpkg -l \u0026#39;linux-*\u0026#39; | sed \u0026#39;/^ii/!d;/\u0026#39;\u0026#34;$(uname -r | sed \u0026#34;s/\\(.*\\)-\\([^0-9]\\+\\)/\\1/\u0026#34;)\u0026#34;\u0026#39;/d;s/^[^ ]* [^ ]* \\([^ ]*\\).*/\\1/;/[0-9]/!d\u0026#39; | head -n -1) --assume-yes Автоматическое подтверждение перезаписи файлов при копировании yes | cp -rf xxx yyy Снятие сетевого дампа tcpdump -i eth0 -w dump host \u0026#34;hostname.ru\u0026#34; где:\n-i - название сетевого интерфейса с которого снимать dump; -w - имя файла, куда сохранять дамп; host - имя хоста трафик с которого снимать. Разрешение приложению слушать порты ниже 1024 sudo setcap cap_net_bind_service=+ep \u0026lt;app_path\u0026gt; Увеличение используемого диапазона портов sysctl net.ipv4.ip_local_port_range=\u0026#34;15000 61000\u0026#34; Без части \u0026ldquo;=\u0026rdquo; и дальше покажет текущую установку.\nЧтобы прописать настройку в системе постоянно нужно добавить в файл /etc/sysctl.conf следующую строку:\nnet.ipv4.ip_local_port_range = 1024 65535 Запуск процесса в фоне с перенаправлением вывода в указанный файл nohup some_command \u0026amp;\u0026gt; nohup2.out\u0026amp; Проверка DNS systemd-resolve --status Дефрагментация Для проверки фрагментации и дефрагментации разделов (если, вдруг, такое понадобится) используется утилита e4defrag. Проверить фрагментацию можно следующей командой:\nsudo e4defrag -c /dev/sdd1 Где /dev/sdd1 - раздел, который проверяется.\nБудет выведена примерно следующая информация:\nTotal/best extents 792579/758250 Average size per extent 226 KB Fragmentation score 1 [0-30 no problem: 31-55 a little bit fragmented: 56- needs defrag] This device (/dev/sdd1) does not need defragmentation. Done. Нужно смотреть на Fragmentation score. Если он в диапазоне 0-30 - дефрагментация не требуется.\nДля выполнения дефрагментации нужно выполнить следующую команду:\nsudo e4defrag -v /dev/sdd1 ult v - вывод расширенной информации (можно не указывать).\nКопирование/перемещение заданного количества файлов из одного каталога в другой Допустим, хотим переместить/скопировать 10 файлов. Команда выполняется в каталоге из которого надо копировать/переместить файлы.\nПеремещение ls . | head -10 | xargs mv -t \u0026#34;$dst_dir\u0026#34; Копирование** ls . | head -10 | xargs cp -t \u0026#34;$dst_dir\u0026#34; Можно использовать find find ./ -printf \u0026#34;%f\\n\u0026#34; | head -n 10 | xargs -I {} mv {} dst_dir Чтобы не пыталось копировать файл \u0026ldquo;.\u0026rdquo; лучше задать фильтр файлов Например:\nfind ./ -name \u0026#34;*.json\u0026#34; | head -n 10 | xargs -I {} mv {} dst_dir Также можно использовать параметр -exec find . -name \u0026#34;*.json\u0026#34; -exec cp {} ../dst-dir/ \\; Изменение временной зоны из консоли sudo dpkg-reconfigure tzdata Создание архива zip zip -r output_file.zip file1 folder1 Настройка максимального количества открытых файлов Для настройки на время сеанса выполнить команду: ulimit -n 999999. Чтобы задать постоянно, нужно в файле /etc/sysctl.conf прописать:\nfs.file-max = 999999 "},{"uri":"https://maxtar.github.io/","title":"Тут всё начинается","tags":[],"description":"","content":"Тут всё начинается В этой вики собрана разная, полезная для меня информация. "},{"uri":"https://maxtar.github.io/categories/","title":"Categories","tags":[],"description":"","content":""},{"uri":"https://maxtar.github.io/tags/","title":"Tags","tags":[],"description":"","content":""}]